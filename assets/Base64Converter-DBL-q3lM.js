import{_ as G,r as i,l as D,o as H,m as J,c as f,a as t,b as K,n as d,g,t as u,p as h,e as E,d as w,v as I,u as L,j as Q,T as W,k as C}from"./index-9vT7cwdc.js";const X={class:"converter"},Y={class:"converter-actions"},Z=["disabled"],ee=["disabled"],te=["disabled"],le={class:"converter-content"},ne={class:"panel-header"},se={class:"input-actions"},ae={key:0,class:"input-stats"},oe={class:"output-panel"},ue={class:"panel-header"},re={class:"output-actions"},ie=["disabled"],de=["disabled"],ce={key:0,class:"output-stats"},ve={key:0,class:"toast-container"},pe={__name:"Base64Converter",setup(me){const n=i(""),s=i(""),v=i(!1),c=i(!1),p=i(!1),k=i(null),r=i({show:!1,message:"",type:"success",icon:"mdi-check-circle"});let y=null;const m=D(()=>n.value?{charCount:n.value.length,byteCount:new Blob([n.value]).size,lineCount:n.value.split(`
`).length}:null),b=D(()=>s.value?{charCount:s.value.length,byteCount:new Blob([s.value]).size,lineCount:s.value.split(`
`).length}:null),R=(l,e)=>(...o)=>{clearTimeout(y),y=setTimeout(()=>l.apply(this,o),e)},a=(l,e="success")=>{r.value.message=l,r.value.type=e,r.value.icon=e==="success"?"mdi-check-circle":"mdi-alert-circle",r.value.show=!0,setTimeout(()=>{r.value.show=!1},3e3)},U=l=>{try{return btoa(unescape(encodeURIComponent(l)))}catch{throw new Error("编码失败：输入包含无效字符")}},S=l=>{try{return decodeURIComponent(escape(atob(l)))}catch{throw new Error("解码失败：输入不是有效的 Base64 字符串")}},F=l=>{const e=l.target.files[0];e&&x(e),l.target.value=""},V=()=>{var l;(l=k.value)==null||l.click()},j=l=>{l.preventDefault(),p.value=!1;const e=l.dataTransfer.files;e.length>0&&x(e[0])},x=l=>{if(l.size>10*1024*1024){a("文件过大，请选择小于 10MB 的文件","error");return}const e=new FileReader;e.onload=o=>{n.value=o.target.result,a(`已加载文件: ${l.name}`)},e.onerror=()=>{a("文件读取失败","error")},e.readAsText(l)},z=async()=>{if(!n.value.trim()){a("请先输入需要编码的文本","error");return}try{s.value=U(n.value),a("Base64 编码成功")}catch(l){a(l.message,"error")}},M=async()=>{if(!n.value.trim()){a("请先输入需要解码的 Base64 字符串","error");return}try{s.value=S(n.value),a("Base64 解码成功")}catch(l){a(l.message,"error")}},N=async()=>{if(!s.value){a("没有可复制的内容","error");return}try{await navigator.clipboard.writeText(s.value),v.value=!0,a("已复制到剪贴板"),setTimeout(()=>{v.value=!1},2e3)}catch{a("复制失败","error")}},O=()=>{n.value="",a("输入已清空")},A=()=>{n.value="",s.value="",a("已清空所有内容")},$=()=>{const l=n.value;n.value=s.value,s.value=l,n.value&&s.value&&a("输入和输出内容已交换")},P=async()=>{try{const l=await navigator.clipboard.readText();n.value=l,a("已从剪贴板粘贴")}catch{a("无法从剪贴板读取内容","error")}},q=()=>{if(!s.value){a("没有可下载的内容","error");return}const l=new Blob([s.value],{type:"text/plain;charset=utf-8"}),e=URL.createObjectURL(l),o=document.createElement("a");o.href=e,o.download=`base64_result_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(e),a("文件已下载")},B=R(()=>{},300),T=()=>{p.value=!0},_=()=>{p.value=!1};return H(()=>{document.addEventListener("dragenter",T),document.addEventListener("dragleave",_)}),J(()=>{document.removeEventListener("dragenter",T),document.removeEventListener("dragleave",_),clearTimeout(y)}),(l,e)=>(C(),f("div",X,[e[16]||(e[16]=t("div",{class:"converter-header"},[t("h1",null,"Base64 转换工具"),t("p",null,"编码、解码和转换 Base64 数据")],-1)),t("div",Y,[t("button",{class:d(["main-btn",{disabled:c.value||!n.value.trim()}]),onClick:z,disabled:c.value||!n.value.trim()},[e[6]||(e[6]=t("i",{class:"mdi mdi-arrow-down-bold-box-outline"},null,-1)),g(" "+u(c.value?"处理中...":"编码"),1)],10,Z),t("button",{class:d(["main-btn",{disabled:c.value||!n.value.trim()}]),onClick:M,disabled:c.value||!n.value.trim()},[e[7]||(e[7]=t("i",{class:"mdi mdi-arrow-up-bold-box-outline"},null,-1)),g(" "+u(c.value?"处理中...":"解码"),1)],10,ee),t("button",{class:"main-btn",onClick:A},e[8]||(e[8]=[t("i",{class:"mdi mdi-delete-outline"},null,-1),g(" 清空 ")])),t("button",{class:d(["main-btn",{disabled:!n.value.trim()&&!s.value.trim()}]),onClick:$,disabled:!n.value.trim()&&!s.value.trim()},e[9]||(e[9]=[t("i",{class:"mdi mdi-swap-vertical"},null,-1),g(" 交换 ")]),10,te)]),t("div",le,[t("div",{class:"input-panel",onDrop:j,onDragover:e[2]||(e[2]=h(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=h(()=>{},["prevent"])),onDragleave:e[4]||(e[4]=h(()=>{},["prevent"]))},[t("div",ne,[e[13]||(e[13]=t("h3",null,"输入文本",-1)),t("div",se,[t("button",{class:"action-btn",onClick:O,title:"清空输入"},e[10]||(e[10]=[t("i",{class:"mdi mdi-delete-outline"},null,-1),t("span",null,"清空",-1)])),t("button",{class:"action-btn",onClick:P,title:"从剪贴板粘贴"},e[11]||(e[11]=[t("i",{class:"mdi mdi-clipboard-text-outline"},null,-1),t("span",null,"粘贴",-1)])),t("button",{class:"action-btn",onClick:V,title:"选择文件"},e[12]||(e[12]=[t("i",{class:"mdi mdi-file-upload-outline"},null,-1),t("span",null,"文件",-1)])),t("input",{ref_key:"fileInput",ref:k,type:"file",onChange:F,style:{display:"none"},accept:".txt,.json,.xml,.html,.css,.js,.md"},null,544)])]),E(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),placeholder:"请输入要转换的文本，或拖拽文件到此处",class:d(["text-input",{"drag-over":p.value}]),onInput:e[1]||(e[1]=(...o)=>L(B)&&L(B)(...o))},null,34),[[I,n.value]]),m.value?(C(),f("div",ae,[t("span",null,"字符数: "+u(m.value.charCount),1),t("span",null,"字节数: "+u(m.value.byteCount),1),t("span",null,"行数: "+u(m.value.lineCount),1)])):w("",!0)],32),t("div",oe,[t("div",ue,[e[15]||(e[15]=t("h3",null,"转换结果",-1)),t("div",re,[t("button",{class:"action-btn",onClick:q,title:"下载结果",disabled:!s.value.trim()},e[14]||(e[14]=[t("i",{class:"mdi mdi-download-outline"},null,-1),t("span",null,"下载",-1)]),8,ie),t("button",{class:"action-btn",onClick:N,title:"复制结果",disabled:!s.value.trim()},[t("i",{class:d(["mdi",v.value?"mdi-check":"mdi-content-copy"])},null,2),t("span",null,u(v.value?"已复制":"复制"),1)],8,de)])]),E(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.value=o),readonly:"",class:"text-output"},null,512),[[I,s.value]]),b.value?(C(),f("div",ce,[t("span",null,"字符数: "+u(b.value.charCount),1),t("span",null,"字节数: "+u(b.value.byteCount),1),t("span",null,"行数: "+u(b.value.lineCount),1)])):w("",!0)])]),K(W,{name:"toast"},{default:Q(()=>[r.value.show?(C(),f("div",ve,[t("div",{class:d(["toast",r.value.type])},[t("i",{class:d(["mdi",r.value.icon])},null,2),t("span",null,u(r.value.message),1)],2)])):w("",!0)]),_:1})]))}},fe=G(pe,[["__scopeId","data-v-14415f36"]]);export{fe as default};
