import{_ as H,u as J,r as d,l as R,o as K,m as Q,c as f,a as s,b as W,t as n,d as l,n as v,h as y,p as _,f as B,e as k,v as I,j as X,T as Y,k as C}from"./index-DE__lAYy.js";const Z={class:"converter"},ee={class:"converter-header"},se={class:"converter-actions"},te=["disabled"],ae=["disabled"],le=["disabled"],ne={class:"converter-content"},oe={class:"panel-header"},ie={class:"input-actions"},re=["title"],ue=["title"],ce=["title"],de=["placeholder"],ve={key:0,class:"input-stats"},be={class:"output-panel"},pe={class:"panel-header"},me={class:"output-actions"},ge=["title","disabled"],he=["title","disabled"],fe={key:0,class:"output-stats"},ye={key:0,class:"toast-container"},Ce={__name:"Base64Converter",setup(we){const{t}=J(),o=d(""),i=d(""),p=d(!1),b=d(!1),m=d(!1),x=d(null),c=d({show:!1,message:"",type:"success",icon:"mdi-check-circle"});let w=null;const g=R(()=>o.value?{charCount:o.value.length,byteCount:new Blob([o.value]).size,lineCount:o.value.split(`
`).length}:null),h=R(()=>i.value?{charCount:i.value.length,byteCount:new Blob([i.value]).size,lineCount:i.value.split(`
`).length}:null),L=(a,e)=>(...u)=>{clearTimeout(w),w=setTimeout(()=>a.apply(this,u),e)},r=(a,e="success")=>{c.value.message=a,c.value.type=e,c.value.icon=e==="success"?"mdi-check-circle":"mdi-alert-circle",c.value.show=!0,setTimeout(()=>{c.value.show=!1},3e3)},U=a=>{try{return btoa(unescape(encodeURIComponent(a)))}catch{throw new Error("编码失败：输入包含无效字符")}},F=a=>{try{return decodeURIComponent(escape(atob(a)))}catch{throw new Error("解码失败：输入不是有效的 Base64 字符串")}},V=a=>{const e=a.target.files[0];e&&E(e),a.target.value=""},j=()=>{var a;(a=x.value)==null||a.click()},z=a=>{a.preventDefault(),m.value=!1;const e=a.dataTransfer.files;e.length>0&&E(e[0])},E=a=>{if(a.size>10*1024*1024){r(t("base64.messages.fileSizeError"),"error");return}const e=new FileReader;e.onload=u=>{o.value=u.target.result,r(`${t("base64.messages.fileLoaded")}: ${a.name}`)},e.onerror=()=>{r(t("base64.messages.fileReadError"),"error")},e.readAsText(a)},N=async()=>{if(!o.value.trim()){r(t("base64.messages.inputRequired"),"error");return}try{i.value=U(o.value),r(t("base64.messages.encodeSuccess"))}catch{r(t("base64.messages.encodeError"),"error")}},O=async()=>{if(!o.value.trim()){r(t("base64.messages.decodeInputRequired"),"error");return}try{i.value=F(o.value),r(t("base64.messages.decodeSuccess"))}catch{r(t("base64.messages.decodeError"),"error")}},A=async()=>{if(!i.value){r(t("base64.messages.noCopyContent"),"error");return}try{await navigator.clipboard.writeText(i.value),p.value=!0,r(t("base64.messages.copySuccess")),setTimeout(()=>{p.value=!1},2e3)}catch{r(t("base64.messages.copyError"),"error")}},M=()=>{o.value="",r(t("base64.messages.clearSuccess"))},$=()=>{o.value="",i.value="",r(t("base64.messages.clearAllSuccess"))},q=()=>{const a=o.value;o.value=i.value,i.value=a,o.value&&i.value&&r(t("base64.messages.swapSuccess"))},P=async()=>{try{const a=await navigator.clipboard.readText();o.value=a,r(t("base64.messages.pasteSuccess"))}catch{r(t("base64.messages.pasteError"),"error")}},G=()=>{if(!i.value){r(t("base64.messages.downloadError"),"error");return}const a=new Blob([i.value],{type:"text/plain;charset=utf-8"}),e=URL.createObjectURL(a),u=document.createElement("a");u.href=e,u.download=`base64_result_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(e),r(t("base64.messages.downloadSuccess"))},S=L(()=>{},300),T=()=>{m.value=!0},D=()=>{m.value=!1};return K(()=>{document.addEventListener("dragenter",T),document.addEventListener("dragleave",D)}),Q(()=>{document.removeEventListener("dragenter",T),document.removeEventListener("dragleave",D),clearTimeout(w)}),(a,e)=>(C(),f("div",Z,[s("div",ee,[s("h1",null,n(l(t)("base64.title")),1),s("p",null,n(l(t)("base64.subtitle")),1)]),s("div",se,[s("button",{class:v(["main-btn",{disabled:b.value||!o.value.trim()}]),onClick:N,disabled:b.value||!o.value.trim()},[e[6]||(e[6]=s("i",{class:"mdi mdi-arrow-down-bold-box-outline"},null,-1)),y(" "+n(b.value?l(t)("base64.actions.processing"):l(t)("base64.actions.encode")),1)],10,te),s("button",{class:v(["main-btn",{disabled:b.value||!o.value.trim()}]),onClick:O,disabled:b.value||!o.value.trim()},[e[7]||(e[7]=s("i",{class:"mdi mdi-arrow-up-bold-box-outline"},null,-1)),y(" "+n(b.value?l(t)("base64.actions.processing"):l(t)("base64.actions.decode")),1)],10,ae),s("button",{class:"main-btn",onClick:$},[e[8]||(e[8]=s("i",{class:"mdi mdi-delete-outline"},null,-1)),y(" "+n(l(t)("base64.actions.clear")),1)]),s("button",{class:v(["main-btn",{disabled:!o.value.trim()&&!i.value.trim()}]),onClick:q,disabled:!o.value.trim()&&!i.value.trim()},[e[9]||(e[9]=s("i",{class:"mdi mdi-swap-vertical"},null,-1)),y(" "+n(l(t)("base64.actions.swap")),1)],10,le)]),s("div",ne,[s("div",{class:"input-panel",onDrop:z,onDragover:e[2]||(e[2]=_(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=_(()=>{},["prevent"])),onDragleave:e[4]||(e[4]=_(()=>{},["prevent"]))},[s("div",oe,[s("h3",null,n(l(t)("base64.labels.input")),1),s("div",ie,[s("button",{class:"action-btn",onClick:M,title:l(t)("base64.actions.clear")},[e[10]||(e[10]=s("i",{class:"mdi mdi-delete-outline"},null,-1)),s("span",null,n(l(t)("base64.actions.clear")),1)],8,re),s("button",{class:"action-btn",onClick:P,title:l(t)("base64.actions.paste")},[e[11]||(e[11]=s("i",{class:"mdi mdi-clipboard-text-outline"},null,-1)),s("span",null,n(l(t)("base64.actions.paste")),1)],8,ue),s("button",{class:"action-btn",onClick:j,title:l(t)("base64.actions.file")},[e[12]||(e[12]=s("i",{class:"mdi mdi-file-upload-outline"},null,-1)),s("span",null,n(l(t)("base64.actions.file")),1)],8,ce),s("input",{ref_key:"fileInput",ref:x,type:"file",onChange:V,style:{display:"none"},accept:".txt,.json,.xml,.html,.css,.js,.md"},null,544)])]),B(s("textarea",{"onUpdate:modelValue":e[0]||(e[0]=u=>o.value=u),placeholder:l(t)("base64.placeholders.input"),class:v(["text-input",{"drag-over":m.value}]),onInput:e[1]||(e[1]=(...u)=>l(S)&&l(S)(...u))},null,42,de),[[I,o.value]]),g.value?(C(),f("div",ve,[s("span",null,n(l(t)("base64.stats.characters"))+": "+n(g.value.charCount),1),s("span",null,n(l(t)("base64.stats.bytes"))+": "+n(g.value.byteCount),1),s("span",null,n(l(t)("base64.stats.lines"))+": "+n(g.value.lineCount),1)])):k("",!0)],32),s("div",be,[s("div",pe,[s("h3",null,n(l(t)("base64.labels.output")),1),s("div",me,[s("button",{class:"action-btn",onClick:G,title:l(t)("base64.actions.download"),disabled:!i.value.trim()},[e[13]||(e[13]=s("i",{class:"mdi mdi-download-outline"},null,-1)),s("span",null,n(l(t)("base64.actions.download")),1)],8,ge),s("button",{class:"action-btn",onClick:A,title:l(t)("base64.actions.copy"),disabled:!i.value.trim()},[s("i",{class:v(["mdi",p.value?"mdi-check":"mdi-content-copy"])},null,2),s("span",null,n(p.value?l(t)("base64.actions.copied"):l(t)("base64.actions.copy")),1)],8,he)])]),B(s("textarea",{"onUpdate:modelValue":e[5]||(e[5]=u=>i.value=u),readonly:"",class:"text-output"},null,512),[[I,i.value]]),h.value?(C(),f("div",fe,[s("span",null,n(l(t)("base64.stats.characters"))+": "+n(h.value.charCount),1),s("span",null,n(l(t)("base64.stats.bytes"))+": "+n(h.value.byteCount),1),s("span",null,n(l(t)("base64.stats.lines"))+": "+n(h.value.lineCount),1)])):k("",!0)])]),W(Y,{name:"toast"},{default:X(()=>[c.value.show?(C(),f("div",ye,[s("div",{class:v(["toast",c.value.type])},[s("i",{class:v(["mdi",c.value.icon])},null,2),s("span",null,n(c.value.message),1)],2)])):k("",!0)]),_:1})]))}},ke=H(Ce,[["__scopeId","data-v-082a62a3"]]);export{ke as default};
